<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8">
    <title>Document</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    
  </head>
  <body>
    <!--
      <input id="csvButton" type="button" value="csvを取得" onclick="csv_data('pwdic.csv')">
    -->
    <input type="text" id="password">
    <input id="checkButton" type="button" value="pwcheck" onclick="pw_Match()">

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
  </body>
  <!--
  <script src="dictionaryAttack.js"></script>
  <script src="pwMatch.js">var pw=Array.of(1234,5678,9012,3456,7890);</script>
  -->
  <script>
    let array_dic;
    function get_csvdata(dataPath) {
	    const request = new XMLHttpRequest(); // HTTPでファイルを読み込む
      let list;
	    request.addEventListener('load', (event) => { // ロードさせ実行
		    const response = event.target.responseText; // 受け取ったテキストを返す
		    response.replace(/\s+/g, ""); //空白削除
		    list = response.split(",");
		    array_dic = Array(list);
		    return array_dic;
	    });
	    request.open('GET', dataPath, true); // csvのパスを指定
	    request.send();
    }
    get_csvdata('pwdic.csv');
    
    function pw_Match() {
      let correct = document.getElementById('password');
      let correctValue = correct.value;
      
      let stcorrectValue='1234';
      console.log(array_dic);
      console.log(stcorrectValue);
      console.log(array_dic[0].indexOf(stcorrectValue));
      console.log(array_dic[0].indexOf('5678'));
      console.log(array_dic[0]);
      console.log(array_dic);
      console.log(array_dic.some(v=>v.includes('5678')));
      if(array_dic[0].indexOf(stcorrectValue)==-1){

        alert("incorrect pw");
      }
      else{
        alert("correct pw");
      }
    }


  </script>
</html>
